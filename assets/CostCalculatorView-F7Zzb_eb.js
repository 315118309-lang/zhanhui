import{d as j,r as w,w as A,a as B,c as S,b as p,e as t,f as N,n as g,F as V,g as _,u as o,t as s,h as P,i as R,v as W,j as O,o as m,_ as U}from"./index-GOkqsi8G.js";import{p as d,t as l,a as r,b as u,c as $}from"./calcStore-CuhoDHwg.js";const z={class:"cost-calculator"},E={class:"tabs"},G={class:"scenarios"},I={class:"params-container"},L=["onClick"],M={class:"group__toggle__arrow"},J={class:"params-grid"},Q=["onUpdate:modelValue"],X={key:0,class:"results"},Y={class:"total"},Z={class:"recommendation"},tt={key:0},et={key:1},lt=j({__name:"CostCalculatorView",setup(ot){const c=w("processless"),x=w(!1),h=a=>a.platePrice>0&&a.monthlyArea>0&&a.monthlyWorkDays>0&&a.dailyWorkHours>0&&a.capacityAreaPerHour>0&&a.electricityPrice>=0;let b=null;const F=()=>{b&&window.clearTimeout(b),b=window.setTimeout(()=>{r.value=h(d)?$(d):null,u.value=h(l)?$(l):null,x.value=!!(r.value&&u.value)},250)};A(d,F,{deep:!0}),A(l,F,{deep:!0});const q=[{key:"basic",title:"基础参数"},{key:"consumables",title:"耗材参数"},{key:"equipment",title:"设备参数"},{key:"labor",title:"人工参数"}],v=B({basic:!0,consumables:!0,equipment:!0,labor:!0}),y={platePrice:{label:"版材单价",unit:"元/平米",group:"basic"},monthlyArea:{label:"月使用面积",unit:"平米/月",group:"basic"},developerPrice:{label:"显影液价格",unit:"元/箱",group:"consumables"},developerWaterVolume:{label:"配套升数",unit:"升/箱",group:"consumables"},unitDeveloperPerSheet:{label:"单张用量",unit:"升/张",group:"consumables"},monthlySheets:{label:"月张数",unit:"张/月",group:"consumables"},equipmentPowerKw:{label:"设备功率",unit:"kW",group:"equipment"},electricityPrice:{label:"电价",unit:"元/kWh",group:"equipment"},monthlyWorkDays:{label:"工作天数",unit:"天/月",group:"equipment"},dailyWorkHours:{label:"每日工时",unit:"小时/日",group:"equipment"},capacityAreaPerHour:{label:"产能",unit:"平米/小时",group:"labor"},monthlySalary:{label:"月工资",unit:"元/月",group:"labor"}},D=Object.keys(d),T=Object.keys(l),H=S(()=>c.value==="processless"?D:T),C=S(()=>c.value==="processless"?d:l),f=a=>{a==="ctp"?(l.developerPrice=900,l.developerWaterVolume=120,l.unitDeveloperPerSheet=.06,l.capacityAreaPerHour=45):(l.developerPrice=700,l.developerWaterVolume=90,l.unitDeveloperPerSheet=.04,l.capacityAreaPerHour=35)},k=a=>{a==="short"?(d.monthlyArea=4e3,l.monthlyArea=4e3,l.monthlySheets=2500):a==="long"?(d.monthlyArea=25e3,l.monthlyArea=25e3,l.monthlySheets=15e3):(d.monthlyArea=12e3,l.monthlyArea=18e3,l.monthlySheets=9e3)};return(a,e)=>(m(),p("div",z,[e[16]||(e[16]=t("h1",null,"成本计算器",-1)),t("div",E,[t("button",{onClick:e[0]||(e[0]=n=>c.value="processless"),class:g({active:c.value==="processless"})},"免冲洗版",2),t("button",{onClick:e[1]||(e[1]=n=>c.value="traditional"),class:g({active:c.value==="traditional"})},"传统冲洗版",2)]),t("div",G,[t("button",{onClick:e[2]||(e[2]=n=>k("short"))},"短版印刷"),t("button",{onClick:e[3]||(e[3]=n=>k("long"))},"长版印刷"),t("button",{onClick:e[4]||(e[4]=n=>k("mixed"))},"混合生产"),t("button",{onClick:e[5]||(e[5]=n=>f("ctp"))},"导入行业基准 CTP"),t("button",{onClick:e[6]||(e[6]=n=>f("ps"))},"导入行业基准 PS")]),t("div",I,[(m(),p(V,null,_(q,n=>t("div",{key:n.key,class:"group"},[t("button",{class:"group__toggle",type:"button",onClick:i=>v[n.key]=!v[n.key]},[R(s(n.title)+" ",1),t("span",M,s(v[n.key]?"▼":"▲"),1)],8,L),P(t("div",J,[(m(!0),p(V,null,_(H.value,i=>P((m(),p("div",{key:i,class:"param-input"},[t("label",null,s(y[i].label),1),P(t("input",{type:"number","onUpdate:modelValue":K=>C.value[i]=K,class:g({invalid:C.value[i]===0})},null,10,Q),[[O,C.value[i],void 0,{number:!0}]]),t("span",null,s(y[i].unit),1)])),[[W,y[i].group===n.key]])),128))],512),[[W,v[n.key]]])])),64))]),x.value&&o(r)&&o(u)?(m(),p("div",X,[e[15]||(e[15]=t("h2",null,"计算结果",-1)),t("table",null,[e[13]||(e[13]=t("thead",null,[t("tr",null,[t("th",null,"成本类型"),t("th",null,"免冲洗版 (元)"),t("th",null,"传统冲洗版 (元)")])],-1)),t("tbody",null,[t("tr",null,[e[7]||(e[7]=t("td",null,"材料成本",-1)),t("td",null,s(o(r).materialCost.toFixed(2)),1),t("td",null,s(o(u).materialCost.toFixed(2)),1)]),t("tr",null,[e[8]||(e[8]=t("td",null,"显影成本",-1)),t("td",null,s(o(r).developerCost.toFixed(2)),1),t("td",null,s(o(u).developerCost.toFixed(2)),1)]),t("tr",null,[e[9]||(e[9]=t("td",null,"能耗成本",-1)),t("td",null,s(o(r).energyCost.toFixed(2)),1),t("td",null,s(o(u).energyCost.toFixed(2)),1)]),t("tr",null,[e[10]||(e[10]=t("td",null,"人工成本",-1)),t("td",null,s(o(r).laborCost.toFixed(2)),1),t("td",null,s(o(u).laborCost.toFixed(2)),1)]),t("tr",Y,[e[11]||(e[11]=t("td",null,"总成本",-1)),t("td",null,s(o(r).totalCost.toFixed(2)),1),t("td",null,s(o(u).totalCost.toFixed(2)),1)]),t("tr",null,[e[12]||(e[12]=t("td",null,"单位成本 (元/平米)",-1)),t("td",null,s(o(r).unitCost.toFixed(4)),1),t("td",null,s(o(u).unitCost.toFixed(4)),1)])])]),t("div",Z,[e[14]||(e[14]=t("h3",null,"成本分析建议",-1)),o(r).totalCost<o(u).totalCost?(m(),p("p",tt," 免冲洗版总体成本更低，预计每月节省 "+s((o(u).totalCost-o(r).totalCost).toFixed(2))+" 元。 ",1)):(m(),p("p",et," 传统冲洗版成本更优，请评估参数或考虑优化能耗与人工配置。 "))])])):N("",!0)]))}}),at=U(lt,[["__scopeId","data-v-44d12631"]]);export{at as default};
